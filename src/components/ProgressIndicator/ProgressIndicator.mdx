import {ArgTypes, Canvas, Meta, Story} from '@storybook/blocks';

import ProgressIndicator from '.';
import * as ProgressIndicatorStories from './ProgressIndicator.stories';

<Meta of={ProgressIndicatorStories} />

# ProgressIndicator

The progress indicator displays the progression through a particular form's steps.

## Presentation

The `ProgressIndicator` component shows the different steps (`ProgressIndicatorItem`) in a form. The
style of each step varies depending on whether it is applicable, it is completed or it is the
currently active step.

## Functional

The parent component must handle all the 'smart' behaviour such as constructing the list of items
each with their individual states. The `Form` component is an example of this behaviour, it checks:

- If the steps are currently active, completed, applicable or if a step can be clicked to navigate
  to it.
- If the current page is the start page, the summary page or the confirmation page.
- If all the applicable steps have been completed.

The `ProgressIndicator` component passes through all the individual steps (dynamic and fixed) to the
`ProgressIndicatorItem` component and checks:

- If the container should be shown for a desktop or a mobile version.

The `ProgressIndicatorItem` component renders all the steps as links or as simple texts depending on
the props.

It is responsible for rendering the `ProgressIndicatorDisplay` component.

The current step is detected through the URL route match, based on the `slug` of an individual step.
The complete collection of available form steps is loaded when the form is initially loaded, and
passed as prop through the component.

Note that a particular step may become not-applicable while filling out the form because of certain
logic rules. The details of each step's status are available in `submission.steps[@index]`.

## Form start

On initial load, no submission is available yet, and the overview is rendered based on the form
rather than the submission.

## Props

<ArgTypes of={ProgressIndicator} />
